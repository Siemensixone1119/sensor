<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ú–æ–±–∏–ª—å–Ω—ã–π —Ö–µ–¥–µ—Ä</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      .content {
        padding: 20px;
        line-height: 1.8;
      }

      .section-header {
        background: #666;
        color: white;
        padding: 10px 15px;
        position: sticky;
        top: 46px; /* –ù–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è - –ø–æ–¥ –ª–æ–≥–æ—Ç–∏–ø–æ–º */
        z-index: 998;
      }
      body {
        font-family: -apple-system, sans-serif;
        background: #f4f4f4;
      }

      .menu-btn {
        font-size: 20px;
        background: none;
        border: none;
        color: black;
        cursor: pointer;
        width: 40px;
        height: 40px;
        border-right: 1px solid #ddd;
      }

      .search-input {
        flex: 1;

        padding: 8px 12px;
        border: none;
        outline: none;
        font-size: 14px;
        background: white;
        color: #333;
        height: 40px;
      }

      .content {
        padding: 15px;
        line-height: 1.8;
      }

      .header-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
        transform: translateY(0);
        transition: none;
      }

      .header-overlay-inner {
        background: brown;
        color: white;
        text-align: center;
        padding: 15px;
        height: 57px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .header-overlay-search {
        background: white;
        display: flex;
        align-items: center;
        justify-content: space-between;
        color: white;
        box-shadow: 0 0 5px #aaa;
      }
    </style>
  </head>
  <body>
    <div
      class="header-overlay"
      id="headerOverlay"
      style="transform: translateY(calc(-100% + 40px))"
    >
      <div class="header-overlay-inner" id="headerOverlayInner">
        <div>–õ–æ–≥–æ—Ç–∏–ø</div>
        <div style="font-size: 30px">‚úÜ</div>
      </div>
      <div class="header-overlay-search">
        <button class="menu-btn">‚ò∞</button>
        <input type="text" class="search-input" placeholder="–ù–∞–π—Ç–∏..." />
        <button class="menu-btn" style="border: none">üîé</button>
        <button
          class="menu-btn"
          style="border-left: 1px solid #ddd; border-right: none"
        >
          üõí
        </button>
      </div>
    </div>

    <div class="content" style="margin-top: 97px">
      <div class="section-header submenu-sticker" style="top: 40px">
        –†–∞–∑–¥–µ–ª 1
      </div>
      <script>
        for (let i = 0; i < 10; i++) {
          document.write(`<p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ ${i + 1}</p>`);
        }
      </script>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 1</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 2</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 3</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 4</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 5</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 6</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 7</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 8</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 9</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 10</p>
      <div class="section-header submenu-sticker" style="top: 40px">
        –†–∞–∑–¥–µ–ª 2
      </div>
      <script>
        for (let i = 10; i < 20; i++) {
          document.write(`<p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ ${i + 1}</p>`);
        }
      </script>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 11</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 12</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 13</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 14</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 15</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 16</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 17</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 18</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 19</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 20</p>
      <div class="section-header submenu-sticker" style="top: 40px">
        –†–∞–∑–¥–µ–ª 3
      </div>
      <script>
        for (let i = 20; i < 30; i++) {
          document.write(`<p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ ${i + 1}</p>`);
        }
      </script>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 21</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 22</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 23</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 24</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 25</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 26</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 27</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 28</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 29</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 30</p>
      <div class="section-header submenu-sticker" style="top: 40px">
        –†–∞–∑–¥–µ–ª 4
      </div>
      <script>
        for (let i = 30; i < 40; i++) {
          document.write(`<p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ ${i + 1}</p>`);
        }
      </script>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 31</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 32</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 33</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 34</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 35</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 36</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 37</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 38</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 39</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 40</p>
      <div class="section-header submenu-sticker" style="top: 40px">
        –†–∞–∑–¥–µ–ª 5
      </div>
      <script>
        for (let i = 40; i < 50; i++) {
          document.write(`<p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ ${i + 1}</p>`);
        }
      </script>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 41</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 42</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 43</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 44</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 45</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 46</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 47</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 48</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 49</p>
      <p>–≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞ 50</p>
    </div>

    <script>
      const headerOverlay = document.getElementById("headerOverlay");
      const headerOverlayInner = document.getElementById("headerOverlayInner");
      const headerOverlaySearch = document.getElementById(
        "headerOverlaySearch"
      );
      const submenuStickers =
        document.getElementsByClassName("submenu-sticker");

      const content = document.getElementsByClassName("content");
      const headerOverlayHeight = headerOverlay.offsetHeight; //–≤—ã—Å–æ—Ç–∞ –¥–≤—É—Ö —Å—Ç—Ä–æ–∫ –∑–∞–≥–æ–ª–æ–≤–∫–∞
      const headerOverlayInnerHeight = headerOverlayInner.offsetHeight; //–≤—ã—Å–æ—Ç–∞ –ª–æ–≥–æ—Ç–∏–ø–∞
      let lastScrollTop = window.scrollY;
      let offset = headerOverlayInnerHeight;

      for (const el of content) el.style.marginTop = `${headerOverlayHeight}px`;

      window.addEventListener("scroll", () => {
        const currentScroll = window.scrollY;
        const delta = lastScrollTop - currentScroll;

        if (delta > 0 && currentScroll > 0) {
          // scrolling up
          offset = Math.min(offset + delta, headerOverlayInnerHeight);
        } else if (delta < 0) {
          // scrolling down
          offset = Math.max(offset + delta, 0);
        }

        if (offset > 0) {
          headerOverlay.style.transform = `translateY(${
            -headerOverlayInnerHeight + offset
          }px)`;
          // –î–≤–∏–≥–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤–º–µ—Å—Ç–µ —Å —Ö–µ–¥–µ—Ä–æ–º
          for (const submenuSticker of submenuStickers)
            submenuSticker.style.top = `${
              headerOverlayHeight - headerOverlayInnerHeight + offset
            }px`;
        } else {
          headerOverlay.style.transform = `translateY(calc(${
            headerOverlayHeight - headerOverlayInnerHeight
          }px - 100%))`;
          for (const submenuSticker of submenuStickers)
            submenuSticker.style.top = `${
              headerOverlayHeight - headerOverlayInnerHeight
            }px`;
        }
        console.log(headerOverlayHeight, headerOverlayInnerHeight);
        lastScrollTop = currentScroll;
      });
    </script>
  </body>
</html>
